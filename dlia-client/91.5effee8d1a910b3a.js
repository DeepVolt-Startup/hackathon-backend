"use strict";(self.webpackChunkDLIA_client=self.webpackChunkDLIA_client||[]).push([[91],{5091:(J,p,a)=>{a.r(p),a.d(p,{RegisterUserComponent:()=>W});var n=a(4006),c=a(7392),w=a(782),f=a(4144),h=a(4859),m=a(9549),C=a(8563),u=a(6895),g=a(2510),P=a(7009),E=a(4385),_=a(7957),U=a(7277),r=a(4650),Z=a(789),y=a(3238);function b(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Full name is required"),r.qZA())}function I(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Full name must include at least two words"),r.qZA())}function T(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"We only accept work email addresses"),r.qZA())}function O(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Please enter a valid work email address."),r.qZA())}function M(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Work email is required"),r.qZA())}function v(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Company is required"),r.qZA())}function A(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Position is required"),r.qZA())}function F(o,i){if(1&o&&(r.TgZ(0,"mat-option",23),r._uU(1),r.qZA()),2&o){const t=i.$implicit;r.Q6J("value",t),r.xp6(1),r.hij(" ",t," ")}}function N(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Country is required"),r.qZA())}function k(o,i){1&o&&(r.TgZ(0,"mat-error"),r._uU(1,"Please enter a valid country "),r.qZA())}const R=["gmail","outlook","yahoo","icloud","aol","gmx","mail","protonmail","zoho","tutanota","hushmail","fastmail","yandex","mail","zimbra","prodigy","rackspace"];function q(o){const i=o.value.split("@")[1]?.split(".")[0];return R.includes(i)?{notWorkEmail:!0}:null}function D(o,i){return t=>{const e=t.get(o),s=t.get(i);return e.value!==s.value?{passwordMismatchError:!0}:null}}let W=(()=>{class o{constructor(t,e,s,l){this.formBuilder=t,this.authService=e,this.router=s,this.snackBar=l,this.hidePassword=!0,this.hideConfirmPassword=!0,this.showAlert=!1,this.alertStyle="alert",this.alertErrorMessage="",this.countryControl=new n.NI,this.countries=U.o,this.filteredCountries=this.countries,this.isInputFocused=!1,this.confirmErrorMatcher={isErrorState:(d,Q)=>{const L=d.touched&&d.invalid,x=d.touched&&this.registrationForm.get("Password").touched&&this.registrationForm.errors?.passwordMismatchError;return L||x}}}ngOnInit(){console.log(this.countries.length),this.registrationForm=new n.cw({FullName:new n.NI("",[n.kI.required,n.kI.pattern("^.+(?: +.+ *)+$")]),WorkEmail:new n.NI("",[n.kI.required,n.kI.email,q]),Country:new n.NI("",[n.kI.required,t=>this.filteredCountries.includes(t.value.replace(/^\w/,e=>e.toUpperCase()))?null:{notCountry:!0}]),Position:new n.NI("",n.kI.required),Company:new n.NI("",n.kI.required),Password:new n.NI("",[n.kI.required,n.kI.minLength(8)]),PhoneNumber:new n.NI("",[n.kI.required]),ConfirmPassword:new n.NI("",n.kI.required)},{validators:D("Password","ConfirmPassword")}),this.registrationForm.get("Country")?.valueChanges.subscribe(t=>{this.filteredCountries=this._filter(t)})}_filter(t){const e=t.toLowerCase();return this.countries.filter(s=>s.toLowerCase().includes(e))}telInputObject(t){t.setCountry("fr")}hasError(t){}register(){const t={fullname:this.registrationForm.getRawValue().FullName.trim().replace(/^\w/,e=>e.toUpperCase()),email:this.registrationForm.getRawValue().WorkEmail.trim().toLowerCase(),password:this.registrationForm.getRawValue().Password,country:this.registrationForm.getRawValue().Country.replace(/^\w/,e=>e.toUpperCase()),company:this.registrationForm.getRawValue().Company.trim(),position:this.registrationForm.getRawValue().Position.trim(),phone_number:this.registrationForm.getRawValue().PhoneNumber};this.authService.signUp(t).subscribe({next:e=>{this.router.navigate(["confirm-user"],{state:{email:this.registrationForm.getRawValue().WorkEmail.trim().toLowerCase()}})},error:e=>{this.snackBar.open(e.error.msg?e.error.msg:"An error has occurred. Please try again later.","close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}})}getErrorMessage(t){return this.registrationForm.controls[t]?.hasError("required")?"Confirm Password is required":"Passwords do not match. Please try again"}getPasswordErrorMessage(t){return this.registrationForm.controls[t]?.hasError("required")?"Password is required":"Password length must be 8 characters or more"}getPhoneNumberErrorMessage(t){return this.registrationForm.controls[t]?.hasError("required")?"Phone number is required":"Please enter a valid phone number."}onKeyDownPhoneNumber(t){/[a-zA-Z%^!@#$%^&*_|=\\{}\[\]:";'<>?,./]/.test(t.key)&&1===t.key.length&&t.preventDefault()}}return o.\u0275fac=function(t){return new(t||o)(r.Y36(n.qu),r.Y36(Z.e),r.Y36(g.F0),r.Y36(P.ux))},o.\u0275cmp=r.Xpm({type:o,selectors:[["app-register-user"]],standalone:!0,features:[r.jDz],decls:66,vars:23,consts:[[1,"h-screen","flex","overflow-hidden"],[1,"m-0","container","md:m-auto","w-full","md:w-3/4","md:w-8/12","bg-white","rounded-xl","mx-auto","px-8","md:px-14","shadow-[0_0px_15px_rgba(0,0,0,0.15)]"],["src","../../../../../assets/images/dvl3.svg","alt","DeepVoltLogo",1,"m-auto","my-12","w-48","md:w-52"],[3,"formGroup","ngSubmit"],[1,"grid","md:grid-cols-2","gap-x-5","user-details","overflow-y-scroll","overflow-x-hidden","md:overflow-hidden"],["appearance","outline"],["matInput","","formControlName","FullName","placeholder","Full name","type","text"],[4,"ngIf"],["matInput","","formControlName","WorkEmail","placeholder","Work email","type","email"],["matInput","","formControlName","Company","placeholder","Company","type","text"],["matInput","","formControlName","Position","placeholder","Position","type","text"],["appearance","outline","floatLabel","always"],["matInput","","formControlName","PhoneNumber","ng2TelInput","",3,"intlTelInputObject","hasError","keydown"],["matInput","","formControlName","Country",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["matInput","","formControlName","Password","placeholder","Password",3,"type"],["matSuffix","",3,"click"],["matInput","","formControlName","ConfirmPassword","placeholder","Confirm password",3,"errorStateMatcher","type"],[1,"relative","w-full","flex","justify-center","py-6","flex-col-reverse","md:flex-row"],[1,"md:absolute","md:left-0","mt-4","md:mt-2"],["routerLink","/login",1,"underline","cursor-pointer",2,"color","#335579"],["type","submit","mat-raised-button","",3,"disabled"],[3,"value"]],template:function(t,e){if(1&t&&(r.TgZ(0,"div",0)(1,"div",1),r._UZ(2,"img",2),r.TgZ(3,"form",3),r.NdJ("ngSubmit",function(){return e.register()}),r.TgZ(4,"div",4)(5,"mat-form-field",5)(6,"mat-label"),r._uU(7,"Full name"),r.qZA(),r._UZ(8,"input",6),r.YNc(9,b,2,0,"mat-error",7),r.YNc(10,I,2,0,"mat-error",7),r.qZA(),r.TgZ(11,"mat-form-field",5)(12,"mat-label"),r._uU(13,"Work email"),r.qZA(),r._UZ(14,"input",8),r.YNc(15,T,2,0,"mat-error",7),r.YNc(16,O,2,0,"mat-error",7),r.YNc(17,M,2,0,"mat-error",7),r.qZA(),r.TgZ(18,"mat-form-field",5)(19,"mat-label"),r._uU(20,"Company"),r.qZA(),r._UZ(21,"input",9),r.YNc(22,v,2,0,"mat-error",7),r.qZA(),r.TgZ(23,"mat-form-field",5)(24,"mat-label"),r._uU(25,"Position"),r.qZA(),r._UZ(26,"input",10),r.YNc(27,A,2,0,"mat-error",7),r.qZA(),r.TgZ(28,"mat-form-field",11)(29,"mat-label"),r._uU(30,"Phone number"),r.qZA(),r.TgZ(31,"input",12),r.NdJ("intlTelInputObject",function(l){return e.telInputObject(l)})("hasError",function(l){return e.hasError(l)})("keydown",function(l){return e.onKeyDownPhoneNumber(l)}),r.qZA(),r.TgZ(32,"mat-error"),r._uU(33),r.qZA()(),r.TgZ(34,"mat-form-field",5)(35,"mat-label"),r._uU(36,"Country"),r.qZA(),r._UZ(37,"input",13),r.TgZ(38,"mat-autocomplete",null,14),r.YNc(40,F,2,2,"mat-option",15),r.qZA(),r.YNc(41,N,2,0,"mat-error",7),r.YNc(42,k,2,0,"mat-error",7),r.qZA(),r.TgZ(43,"mat-form-field",5)(44,"mat-label"),r._uU(45,"Password"),r.qZA(),r._UZ(46,"input",16),r.TgZ(47,"mat-icon",17),r.NdJ("click",function(){return e.hidePassword=!e.hidePassword}),r._uU(48),r.qZA(),r.TgZ(49,"mat-error"),r._uU(50),r.qZA()(),r.TgZ(51,"mat-form-field",5)(52,"mat-label"),r._uU(53,"Confirm password"),r.qZA(),r._UZ(54,"input",18),r.TgZ(55,"mat-icon",17),r.NdJ("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),r._uU(56),r.qZA(),r.TgZ(57,"mat-error"),r._uU(58),r.qZA()()(),r.TgZ(59,"div",19)(60,"span",20),r._uU(61,"Have an account? "),r.TgZ(62,"a",21),r._uU(63,"Login"),r.qZA()(),r.TgZ(64,"button",22),r._uU(65," Register "),r.qZA()()()()()),2&t){const s=r.MAs(39);r.xp6(3),r.Q6J("formGroup",e.registrationForm),r.xp6(6),r.Q6J("ngIf",null==e.registrationForm.get("FullName").errors?null:e.registrationForm.get("FullName").errors.required),r.xp6(1),r.Q6J("ngIf",null==e.registrationForm.get("FullName").errors?null:e.registrationForm.get("FullName").errors.pattern),r.xp6(5),r.Q6J("ngIf",null==e.registrationForm.get("WorkEmail").errors?null:e.registrationForm.get("WorkEmail").errors.notWorkEmail),r.xp6(1),r.Q6J("ngIf",null==e.registrationForm.get("WorkEmail").errors?null:e.registrationForm.get("WorkEmail").errors.email),r.xp6(1),r.Q6J("ngIf",null==e.registrationForm.get("WorkEmail").errors?null:e.registrationForm.get("WorkEmail").errors.required),r.xp6(5),r.Q6J("ngIf",null==e.registrationForm.get("Company").errors?null:e.registrationForm.get("Company").errors.required),r.xp6(5),r.Q6J("ngIf",null==e.registrationForm.get("Position").errors?null:e.registrationForm.get("Position").errors.required),r.xp6(6),r.Oqu(e.getPhoneNumberErrorMessage("PhoneNumber")),r.xp6(4),r.Q6J("matAutocomplete",s),r.xp6(3),r.Q6J("ngForOf",e.filteredCountries),r.xp6(1),r.Q6J("ngIf",null==e.registrationForm.get("Country").errors?null:e.registrationForm.get("Country").errors.required),r.xp6(1),r.Q6J("ngIf",(null==e.registrationForm.get("Country").errors?null:e.registrationForm.get("Country").errors.notCountry)&&!(null!=e.registrationForm.get("Country").errors&&e.registrationForm.get("Country").errors.required)),r.xp6(4),r.Q6J("type",e.hidePassword?"password":"text"),r.xp6(2),r.Oqu(e.hidePassword?"visibility_off":"visibility"),r.xp6(2),r.Oqu(e.getPasswordErrorMessage("Password")),r.xp6(4),r.Q6J("errorStateMatcher",e.confirmErrorMatcher)("type",e.hideConfirmPassword?"password":"text"),r.xp6(2),r.Oqu(e.hideConfirmPassword?"visibility_off":"visibility"),r.xp6(2),r.Oqu(e.getErrorMessage("ConfirmPassword")),r.xp6(6),r.Akn("background-color:"+(e.registrationForm.valid?"#335579;color:white;":"#E0E0E0;color:D1D1D1;")),r.Q6J("disabled",!e.registrationForm.valid)}},dependencies:[c.Ps,c.Hw,w.N6,f.c,m.TO,m.KE,m.hX,m.R9,f.Nt,h.ot,h.lW,m.lN,C.g,C._,n.u5,n._Y,n.Fj,n.JJ,n.JL,n.UX,n.sg,n.u,u.ez,u.sg,u.O5,g.Bz,g.rH,P.ZX,E.LD,y.ey,_.Bb,_.XC,_.ZL],styles:[".alert[_ngcontent-%COMP%]{position:fixed;top:-100px;left:50%;transform:translate(-50%)}.alert.show[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideIn;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideIn{0%{top:-100px}to{top:0}}.alert.hide[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideOut;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideOut{0%{top:0}to{top:-100px}}@media (max-width: 768px){.user-details[_ngcontent-%COMP%]{max-height:50vh}}[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px;height:50px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:6px;background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:6px;background:#888;height:20%}[_ngcontent-%COMP%]::-webkit-scrollbar-button{height:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{-webkit-transition:.8s;transition:.8s;background:#555}.mat-form-field[_ngcontent-%COMP%]{margin-right:1rem}  .custom-style{background-color:#fe5157;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;appearance:none;margin:0}"]}),o})()}}]);