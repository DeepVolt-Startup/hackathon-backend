"use strict";(self.webpackChunkDLIA_client=self.webpackChunkDLIA_client||[]).push([[253],{6616:(D,f,i)=>{i.d(f,{B:()=>s});var p=i(4650),_=i(8386);let s=(()=>{class l{constructor(r){this.userService=r}saveSession(r){window.localStorage.setItem("AT",r.accessToken)}getSession(){return window.localStorage.getItem("accessToken")?{accessToken:window.localStorage.getItem("accessToken")||""}:null}logout(){window.localStorage.clear()}isLoggedIn(){let r=this.getSession();if(!r)return!1;const x=JSON.parse(atob(r.accessToken.split(".")[1]));return!(Date.now()>1e3*x.exp)}getuserId(){let r=this.getSession();return JSON.parse(atob(r.accessToken.split(".")[1])).id}}return l.\u0275fac=function(r){return new(r||l)(p.LFG(_.K))},l.\u0275prov=p.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3253:(D,f,i)=>{i.r(f),i.d(f,{LocationsComponent:()=>rt});var p=i(6895),_=i(6709),s=i(7155),l=i(9549),g=i(4859),r=i(7392),x=i(1572),y=i(455),d=i(5938),b=i(4144),Z=i(7009),v=i(8739),C=i(6308),S=i(8754),T=i(4006),k=i(3546),L=i(782),A=i(4385),U=i(8563),t=i(4650);let w=(()=>{class e{constructor(o,n){this.dialogRef=o,this.data=n,this.alertStyle="alert",this.alertErrorMessage=""}ngOnInit(){this.name=this.data.name||"",this.location_id=this.data.location_id||""}openDeleteConfirmation(){const o=new Set;this.dialogRef.close(),o.add(this.location_id),this.openDeleteDialog(o)}closeDialog(){}close(){this.dialogRef.close()}delete(){this.dialogRef.close("delete")}closeAlert(){this.alertStyle="alert hide"}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.so),t.Y36(d.WI))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-location-details"]],inputs:{openDeleteDialog:"openDeleteDialog",name:"name",location_id:"location_id",alertStyle:"alertStyle",alertErrorMessage:"alertErrorMessage"},standalone:!0,features:[t.jDz],decls:52,vars:11,consts:[[1,"flex","justify-between"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"mat-dialog-close"],[1,"close-icon"],["mat-dialog-content","",1,"simulation-container",2,"max-height","initial !important"],[1,"simulation-details"],[1,"mb-4","text-gray"],[1,"text-base","font-medium","mb-4"],[1,"text-gray"],[1,"text-base","font-medium","mb-3"],[1,"simulation-details",2,"padding-right","5rem"],["mat-dialog-actions","",1,"flex","justify-between","items-center"],["mat-icon-button","","matTooltip","Basic",2,"color","red",3,"click"],["mat-button","",3,"click"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Prediction Details"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"div",4)(7,"div",5)(8,"mat-label",6),t._uU(9," Name"),t.qZA(),t.TgZ(10,"p",7),t._uU(11),t.qZA(),t.TgZ(12,"mat-label",8),t._uU(13," Saved name"),t.qZA(),t.TgZ(14,"p",9),t._UZ(15,"strong"),t._uU(16),t.qZA(),t.TgZ(17,"mat-label",8),t._uU(18," Date"),t.qZA(),t.TgZ(19,"p",9),t._UZ(20,"strong"),t._uU(21),t.qZA()(),t.TgZ(22,"div",10)(23,"mat-label",8),t._uU(24," Type location"),t.qZA(),t.TgZ(25,"p",9),t._UZ(26,"strong"),t._uU(27),t.qZA(),t.TgZ(28,"mat-label",8),t._uU(29," Longitude"),t.qZA(),t.TgZ(30,"p",9),t._UZ(31,"strong"),t._uU(32),t.qZA(),t.TgZ(33,"mat-label",8),t._uU(34," Latitude"),t.qZA(),t.TgZ(35,"p",9),t._UZ(36,"strong"),t._uU(37),t.qZA(),t.TgZ(38,"mat-label",8),t._uU(39," Site attractiveness score"),t.qZA(),t.TgZ(40,"p",9),t._UZ(41,"strong"),t._uU(42),t.ALo(43,"number"),t.qZA()()(),t.TgZ(44,"div",11)(45,"div")(46,"button",12),t.NdJ("click",function(){return n.openDeleteConfirmation()}),t.TgZ(47,"mat-icon"),t._uU(48,"delete"),t.qZA()()(),t.TgZ(49,"div")(50,"button",13),t.NdJ("click",function(){return n.close()}),t._uU(51,"Close"),t.qZA()()()),2&o&&(t.xp6(3),t.Q6J("mat-dialog-close",!0),t.xp6(8),t.Oqu(n.data.name),t.xp6(5),t.hij(" ",n.data.saved_name," "),t.xp6(5),t.hij("",n.data.created_at.split("T")[0]," "),t.xp6(6),t.hij(" ",n.data.type_location," "),t.xp6(5),t.hij(" ",n.data.long,""),t.xp6(5),t.hij(" ",n.data.lat,""),t.xp6(5),t.hij(" ",t.xi3(43,8,n.data.site_attractiveness_score,"1.2-2"),""))},dependencies:[r.Ps,r.Hw,L.N6,b.c,l.hX,g.ot,g.lW,l.lN,U.g,T.u5,d.Is,d.ZT,d.uh,d.xY,d.H8,T.UX,p.ez,p.JJ,A.LD,k.QW]}),e})();var N=i(1588),O=i(3900),P=i(9646),M=i(2340),Y=i(529);let j=(()=>{class e{constructor(o){this._httpClient=o,this.uri=M.N.apiUrl,this.predictNumber=0}getLocations(o){return console.log(this.uri),this._httpClient.get(this.uri+`/v1/user/locations/${o}`)}deleteLocations(o){return this._httpClient.delete(this.uri+"/v1/user/locations",{body:{locations:o}}).pipe((0,O.w)(c=>(0,P.of)(c)))}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(Y.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var I=i(6616),B=i(296);function E(e,a){1&e&&t._UZ(0,"th",37)}function R(e,a){1&e&&(t.TgZ(0,"td",38)(1,"section",39)(2,"mat-icon",40),t._uU(3,"launch"),t.qZA()()())}function H(e,a){1&e&&t._UZ(0,"th",37)}function J(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",41)(1,"section",42)(2,"mat-checkbox",43),t.NdJ("change",function(c){const m=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.applySimFilter(c,m))}),t.qZA()()()}}function Q(e,a){1&e&&(t.TgZ(0,"th",44),t._uU(1," Name "),t.qZA())}function z(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.name.length<=20?o.name:t.Dn7(2,1,o.name,0,20)+"..."," ")}}function q(e,a){1&e&&(t.TgZ(0,"th",45),t._uU(1," Created on "),t.qZA())}function F(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.created_at.split("T")[0]," ")}}function $(e,a){1&e&&(t.TgZ(0,"th",46),t._uU(1," Saved name "),t.qZA())}function G(e,a){if(1&e&&(t.TgZ(0,"td",47),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.saved_name.length<=20?o.saved_name:t.Dn7(2,1,o.saved_name,0,20)+"..."," ")}}function W(e,a){1&e&&(t.TgZ(0,"th",48),t._uU(1," Location type "),t.qZA())}function X(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.type_location," ")}}function K(e,a){1&e&&(t.TgZ(0,"th",49),t._uU(1," Note "),t.qZA())}function V(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.note," ")}}function tt(e,a){1&e&&(t.TgZ(0,"th",50),t._uU(1," Location source "),t.qZA())}function et(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.location_source," ")}}function ot(e,a){1&e&&(t.TgZ(0,"th",51),t._uU(1," Site attractiveness score "),t.qZA())}function nt(e,a){if(1&e&&(t.TgZ(0,"td",41),t._uU(1),t.ALo(2,"number"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",t.xi3(2,1,o.site_attractiveness_score,"1.2-2")," ")}}function at(e,a){1&e&&t._UZ(0,"tr",52)}function it(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"tr",53),t.NdJ("click",function(c){const m=t.CHM(o).$implicit,h=t.oxw();return t.KtG(h.openLocDetails(c,m))}),t.qZA()}}function ct(e,a){1&e&&(t.TgZ(0,"tr",54)(1,"td",55),t._uU(2,"No data matching the filter !"),t.qZA()())}const st=function(){return[5,10,25,100]};let rt=(()=>{class e{constructor(o,n,c,u,m,h){this.locationService=o,this.dialog=n,this.cdr=c,this.tokenService=u,this.snackBar=m,this._compareService=h,this.displayedColumns=["maticon","checkbox","name","saved_name","site_attractiveness_score","type_location","location_source","note","created_at"],this.dataSource=new s.by([]),this.filterDictionary=new Set,this.compareList=new Set,this.pageIndex=0}ngOnDestroy(){this._compareService.clearData()}ngOnInit(){const o=this.tokenService.getuserId();this.dataSource=new s.by,this.dataSource.paginator=this.paginator,this.locationService.getLocations(o).subscribe({next:n=>{this.locations=n,console.log("this locations data : ",n),this.dataSource=new s.by(n),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}})}applyFilter(o){const n=o.target.value;console.log(n),this.dataSource.filter=n.trim().toLowerCase(),this.pageIndex=0,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}applySimFilter(o,n){!0===o.checked?(this.filterDictionary.add(n.location_id),this.compareList.add(n)):(this.filterDictionary.delete(n.location_id),this.compareList.delete(n))}openLocDetails(o,n){-1===o.target.className.indexOf("mat-checkbox-inner-container")&&(this.dialog.open(w,{data:n,minWidth:"150px",width:"400px",minHeight:"180px"}).componentInstance.openDeleteDialog=this.openDeleteDialog.bind(this))}openDeleteDialog(o){console.log(o);const n={mySet:[...o]},c=this.dialog.open(S.$,{data:{title:"Delete Locations",content:"Do you want to delete the selected locations ?"},height:"200px",minWidth:"150px",width:"400px",minHeight:"180px"});c.afterClosed().subscribe(u=>{u?(console.log(n),this.locationService.deleteLocations(n.mySet).subscribe({next:m=>{for(const h of o){let lt=this.dataSource.data.findIndex(mt=>mt.location_id==h);this.dataSource.data.splice(lt,1)}o.clear(),this.dataSource=new s.by(this.dataSource.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log(this.dataSource.data),this.snackBar.open("Loations deleted successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),console.log(m),this.dialog.closeAll()},error:m=>{console.error(m),this.snackBar.open(m.error.msg?m.error.msg:"Deletion failed due to server error. Please try again later.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}})):c.close()})}openComparisonTable(){if(this.compareList.size<2)this.snackBar.open("To compare locations, please select a minimum of two locations.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]});else{let o=[];this.compareList.forEach(n=>{console.log(n),o.push({index:(0,N.Z)(),name:n.name,type:n.type_location,score:n.site_attractiveness_score,populationDensity:n.population_densit,medianRevenue:n.median_revenue,poiNearbyCount:n.nearby_POIs_count,competitionCount:n.competition_count,evRegistration:n.ev_registrations,lon:n.long,lat:n.lat})}),this._compareService.openDetailedComparisonDialogFromLocations(o),console.log(this.compareList)}}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(j),t.Y36(d.uw),t.Y36(t.sBO),t.Y36(I.B),t.Y36(Z.ux),t.Y36(B.z))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-locations"]],viewQuery:function(o,n){if(1&o&&(t.Gf(v.NW,5),t.Gf(C.YE,5)),2&o){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},standalone:!0,features:[t.jDz],decls:51,vars:7,consts:[[1,"w-full","flex","flex-col","justify-center","items-center","pt-10",2,"background-color","white"],[1,"w-11/12","flex","justify-between","items-center","h-16"],[1,"text-3xl","font-medium",2,"color","#335579"],[1,"flex","items-center","justify-center"],["appearance","outline",1,"w-full","justify-self-end",2,"font-size","12px"],["matInput","",3,"keyup"],["input",""],["matSuffix",""],["mat-raised-button","",2,"background-color","#335579","color","white","margin-bottom","1em","width","100%",3,"click"],["mat-icon-button","","matTooltip","Basic",1,"w-full","h-full",3,"click"],["tabindex","0",1,"table-container","w-11/12","justify-between"],["mat-table","","matSort","","matSortDirection","desc","matSortActive","created_at",1,"mb-1",3,"dataSource"],["matColumnDef","maticon","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","no-padding",4,"matCellDef"],["matColumnDef","checkbox","sticky",""],["mat-cell","",4,"matCellDef"],["matColumnDef","name","sticky",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name",4,"matHeaderCellDef"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by created_at",4,"matHeaderCellDef"],["matColumnDef","saved_name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by saved_name",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap",4,"matCellDef"],["matColumnDef","type_location"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type_location",4,"matHeaderCellDef"],["matColumnDef","note"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by note",4,"matHeaderCellDef"],["matColumnDef","location_source"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by location_source",4,"matHeaderCellDef"],["matColumnDef","site_attractiveness_score"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by site_attractiveness_score",4,"matHeaderCellDef"],["mat-header-row","","class","no-hover",4,"matHeaderRowDef"],["mat-row","","class","hoveredElements",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"flex","justify-end","fixed","bottom-0","right-7","z-10"],["aria-labels","select page of predictions",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",1,"no-padding"],[1,"example-section"],[1,"text-xl"],["mat-cell",""],[1,"example-section","no-padding"],[1,"example-margin","text-xl","checkbox",3,"change"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by name"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by created_at"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by saved_name"],["mat-cell","",1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by type_location"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by note"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by location_source"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by site_attractiveness_score"],["mat-header-row","",1,"no-hover"],["mat-row","",1,"hoveredElements",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Locations"),t.qZA(),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"input",5,6),t.NdJ("keyup",function(u){return n.applyFilter(u)}),t.qZA(),t.TgZ(10,"mat-icon",7),t._uU(11,"search"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.openComparisonTable()}),t._uU(13," Compare "),t.qZA(),t.TgZ(14,"button",9),t.NdJ("click",function(){return n.openDeleteDialog(n.filterDictionary)}),t.TgZ(15,"mat-icon"),t._uU(16,"delete"),t.qZA()()()(),t.TgZ(17,"section",10)(18,"table",11),t.ynx(19,12),t.YNc(20,E,1,0,"th",13),t.YNc(21,R,4,0,"td",14),t.BQk(),t.ynx(22,15),t.YNc(23,H,1,0,"th",13),t.YNc(24,J,3,0,"td",16),t.BQk(),t.ynx(25,17),t.YNc(26,Q,2,0,"th",18),t.YNc(27,z,3,5,"td",16),t.BQk(),t.ynx(28,19),t.YNc(29,q,2,0,"th",20),t.YNc(30,F,2,1,"td",16),t.BQk(),t.ynx(31,21),t.YNc(32,$,2,0,"th",22),t.YNc(33,G,3,5,"td",23),t.BQk(),t.ynx(34,24),t.YNc(35,W,2,0,"th",25),t.YNc(36,X,2,1,"td",16),t.BQk(),t.ynx(37,26),t.YNc(38,K,2,0,"th",27),t.YNc(39,V,2,1,"td",16),t.BQk(),t.ynx(40,28),t.YNc(41,tt,2,0,"th",29),t.YNc(42,et,2,1,"td",16),t.BQk(),t.ynx(43,30),t.YNc(44,ot,2,0,"th",31),t.YNc(45,nt,3,4,"td",16),t.BQk(),t.YNc(46,at,1,0,"tr",32),t.YNc(47,it,1,0,"tr",33),t.YNc(48,ct,3,0,"tr",34),t.qZA()(),t.TgZ(49,"div",35),t._UZ(50,"mat-paginator",36),t.qZA()()),2&o&&(t.xp6(14),t.Akn(0===n.filterDictionary.size?"color:#bfbfbf;margin-bottom: 12px;pointer-events:none;":"color:red;margin-bottom: 12px;"),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(28),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(6,st)))},dependencies:[p.ez,p.OU,p.JJ,_.p9,_.oG,s.p0,s.BZ,s.fO,s.as,s.w1,s.Dz,s.nj,s.ge,s.ev,s.XQ,s.Gk,s.Ee,l.lN,l.KE,l.hX,l.R9,g.ot,g.lW,r.Ps,r.Hw,x.Cq,y.rP,d.Is,b.c,b.Nt,Z.ZX,v.TU,v.NW,C.JX,C.YE,C.nU],styles:[".example-section[_ngcontent-%COMP%]{margin:12px 0}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}table[_ngcontent-%COMP%]{width:100%}body[_ngcontent-%COMP%]{overflow-y:hidden}.table-container[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;height:516px}th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.mat-icon-button[_ngcontent-%COMP%]{height:48px}.mat-header-cell[_ngcontent-%COMP%], .cdk-header-cell[_ngcontent-%COMP%], .cdk-column-date[_ngcontent-%COMP%], .mat-column-date[_ngcontent-%COMP%], .ng-star-inserted[_ngcontent-%COMP%], .mat-table-sticky[_ngcontent-%COMP%]{padding:0 1rem;text-align:left}[_ngcontent-%COMP%]::-webkit-scrollbar{height:9px;width:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:6px;background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:6px;background:#888;height:20%}[_ngcontent-%COMP%]::-webkit-scrollbar-button{height:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{-webkit-transition:.8s;transition:.8s;background:#555}.rightBorder[_ngcontent-%COMP%]{border-right:1px solid #333}.no-padding[_ngcontent-%COMP%]{padding:0!important}.checkbox[_ngcontent-%COMP%]{margin:0}  .mat-checkbox-checked.mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:#335579!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background,   .mat-checkbox-checked.mat-accent .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#335579}  .mat-checkbox.mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:#335579!important}  .custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}tr[_ngcontent-%COMP%]{cursor:pointer}.hoveredElements[_ngcontent-%COMP%]:hover{background-color:#f1f1f1f1}"]}),e})()}}]);