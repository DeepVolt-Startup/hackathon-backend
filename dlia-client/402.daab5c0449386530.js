"use strict";(self.webpackChunkDLIA_client=self.webpackChunkDLIA_client||[]).push([[402],{6616:(M,u,a)=>{a.d(u,{B:()=>i});var d=a(4650),g=a(8386);let i=(()=>{class m{constructor(s){this.userService=s}saveSession(s){window.localStorage.setItem("AT",s.accessToken)}getSession(){return window.localStorage.getItem("accessToken")?{accessToken:window.localStorage.getItem("accessToken")||""}:null}logout(){window.localStorage.clear()}isLoggedIn(){let s=this.getSession();if(!s)return!1;const C=JSON.parse(atob(s.accessToken.split(".")[1]));return!(Date.now()>1e3*C.exp)}getuserId(){let s=this.getSession();return JSON.parse(atob(s.accessToken.split(".")[1])).id}}return m.\u0275fac=function(s){return new(s||m)(d.LFG(g.K))},m.\u0275prov=d.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},9402:(M,u,a)=>{a.r(u),a.d(u,{ComparisonsComponent:()=>Q});var d=a(6895),g=a(6709),i=a(7155),m=a(9549),h=a(4859),s=a(7392),C=a(1572),D=a(455),b=a(5938),T=a(4144),O=a(7009),x=a(8739),f=a(6308),P=a(8754),t=a(4650),k=a(3976),y=a(6616),E=a(296);function v(o,r){1&o&&t._UZ(0,"th",32)}function S(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",33)(1,"section",34)(2,"mat-checkbox",35),t.NdJ("change",function(c){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.applyCompFilter(c,l))}),t.qZA()()()}}function A(o,r){1&o&&(t.TgZ(0,"th",36),t._uU(1," Name "),t.qZA())}function Z(o,r){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.comparison_name," ")}}function w(o,r){1&o&&(t.TgZ(0,"th",38),t._uU(1," Created on "),t.qZA())}function U(o,r){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.created_at.split("T")[0]," ")}}function I(o,r){1&o&&(t.TgZ(0,"th",39),t._uU(1," Note "),t.qZA())}function B(o,r){if(1&o&&(t.TgZ(0,"td",40),t._uU(1),t.ALo(2,"slice"),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.note.length<=20?e.note:t.Dn7(2,1,e.note,0,20)+"..."," ")}}function N(o,r){1&o&&(t.TgZ(0,"th",41),t._uU(1," Number of compared locations "),t.qZA())}function R(o,r){if(1&o&&(t.TgZ(0,"td",37),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.xp6(1),t.hij(" ",e.compared_locations_count," ")}}function L(o,r){1&o&&(t.TgZ(0,"th",42),t._uU(1," Actions "),t.qZA())}function K(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"td",43)(1,"mat-icon",44),t._uU(2,"file_download"),t.qZA(),t.TgZ(3,"button",45),t.NdJ("click",function(){const _=t.CHM(e).$implicit,l=t.oxw();return t.KtG(l.deleteComparison(_))}),t.TgZ(4,"mat-icon"),t._uU(5,"delete"),t.qZA()(),t.TgZ(6,"mat-icon",46),t._uU(7,"launch"),t.qZA()()}}function W(o,r){1&o&&t._UZ(0,"tr",47)}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",48),t.NdJ("click",function(c){const l=t.CHM(e).$implicit,p=t.oxw();return t.KtG(p.openComparison(c,l))}),t.qZA()}}function H(o,r){1&o&&(t.TgZ(0,"tr",49)(1,"td",50),t._uU(2,"No data matching the filter"),t.qZA()())}const j=function(){return[5,10,25,100]};let Q=(()=>{class o{constructor(e,n,c,_,l,p){this.dialog=e,this.cdr=n,this.comparisonService=c,this.tokenService=_,this.snackBar=l,this._comparisonService=p,this.displayedColumns=["checkbox","comparison_name","note","compared_locations_count","created_at","actions"],this.dataSource=new i.by([]),this.filterDictionary=new Set,this.filterDictionary1=new Set,this.pageIndex=0}ngOnDestroy(){this._comparisonService.clearData()}ngOnInit(){const e=this.tokenService.getuserId();this.dataSource=new i.by,this.dataSource.paginator=this.paginator,this.comparisonService.getComparisons(e).subscribe({next:n=>{console.log(n),this.comparisons=n,this.dataSource=new i.by(n),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,console.log("datasource:",this.dataSource)}})}applyFilter(e){const n=e.target.value;console.log(n),this.dataSource.filter=n.trim().toLowerCase(),this.pageIndex=0,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}applyCompFilter(e,n){console.log(n),!0===e.checked?this.filterDictionary.add(n.comparison_id):this.filterDictionary.delete(n.comparison_id)}openDeleteDialog(e){console.log(e);const n={mySet:[...e]},c=this.dialog.open(P.$,{data:{title:"Delete comparisons",content:"Do you want to delete the selected comparisons ?"},height:"200px",minWidth:"150px",width:"400px",minHeight:"180px"});c.afterClosed().subscribe(_=>{_?this.comparisonService.deleteComparisons(n.mySet).subscribe({next:l=>{for(const p of e){let z=this.dataSource.data.findIndex(J=>J.comparison_id==p);this.dataSource.data.splice(z,1)}e.clear(),this.dataSource=new i.by(this.dataSource.data),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.snackBar.open("Comparisons deleted successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),console.log(l),this.dialog.closeAll()},error:l=>{console.error(l),this.snackBar.open(l.error.msg?l.error.msg:"Deletion failed due to server error. Please try again later.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}}):c.close()})}deleteComparison(e){const{comparison_id:n}=e;this.filterDictionary1.has(n)||(this.filterDictionary1.add(n),this.openDeleteDialog(this.filterDictionary1))}openComparison(e,n){console.log("event:",e.target.innerHTML),-1===e.target.className.indexOf("mat-checkbox-inner-container")&&!e.target.innerHTML.includes("delete")&&this._comparisonService.openDetailedComparisonDialogFromId(n.comparison_id)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(b.uw),t.Y36(t.sBO),t.Y36(k.s),t.Y36(y.B),t.Y36(O.ux),t.Y36(E.z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-comparisons"]],viewQuery:function(e,n){if(1&e&&(t.Gf(x.NW,5),t.Gf(f.YE,5)),2&e){let c;t.iGM(c=t.CRH())&&(n.paginator=c.first),t.iGM(c=t.CRH())&&(n.sort=c.first)}},standalone:!0,features:[t.jDz],decls:40,vars:7,consts:[[1,"w-full","flex","flex-col","justify-center","items-center","pt-10",2,"background-color","white"],[1,"w-11/12","flex","justify-between","items-center","h-16"],[1,"text-3xl","font-medium",2,"color","#335579"],[1,"flex","items-center","justify-center"],["appearance","outline",1,"w-full","justify-self-end",2,"font-size","12px"],["matInput","",3,"keyup"],["input",""],["matSuffix",""],["mat-icon-button","","matTooltip","Basic",1,"w-full","h-full",3,"click"],["tabindex","0",1,"table-container","w-11/12","justify-between"],["mat-table","","matSort","","matSortDirection","desc","matSortActive","created_at",1,"mb-1",3,"dataSource"],["matColumnDef","checkbox","sticky",""],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","style","text-align: center !important;",4,"matCellDef"],["matColumnDef","comparison_name","sticky",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by comparison_name",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","created_at"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by created_at",4,"matHeaderCellDef"],["matColumnDef","note"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by note",4,"matHeaderCellDef"],["mat-cell","","class","whitespace-nowrap",4,"matCellDef"],["matColumnDef","compared_locations_count"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by compared_locations_count",4,"matHeaderCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","cursor-default",4,"matHeaderCellDef"],["mat-cell","","class","flex items-center",4,"matCellDef"],["mat-header-row","","class","no-hover",4,"matHeaderRowDef"],["mat-row","","class","hoveredElements","style","border-bottom: 1px solid rgba(0, 0, 0, 0.12)",3,"click",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[1,"flex","justify-end","fixed","bottom-0","right-7","z-10"],["aria-labels","select page of comparisons",3,"pageSizeOptions"],["mat-header-cell",""],["mat-cell","",2,"text-align","center !important"],[1,"example-section","no-padding"],[1,"example-margin","text-xl","checkbox",2,"text-align","center","padding-left","6px",3,"change"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by comparison_name"],["mat-cell",""],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by created_at"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by note"],["mat-cell","",1,"whitespace-nowrap"],["mat-header-cell","","mat-sort-header","","sortActionDescription","Sort by compared_locations_count"],["mat-header-cell","",1,"cursor-default"],["mat-cell","",1,"flex","items-center"],[1,"hover:cursor-pointer","pt-0.5"],["mat-icon-button","","matTooltip","Basic",2,"color","red",3,"click"],[1,"text-xl"],["mat-header-row","",1,"no-hover"],["mat-row","",1,"hoveredElements",2,"border-bottom","1px solid rgba(0, 0, 0, 0.12)",3,"click"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Comparisons"),t.qZA(),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"input",5,6),t.NdJ("keyup",function(_){return n.applyFilter(_)}),t.qZA(),t.TgZ(10,"mat-icon",7),t._uU(11,"search"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return n.openDeleteDialog(n.filterDictionary)}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA()()()(),t.TgZ(15,"section",9)(16,"table",10),t.ynx(17,11),t.YNc(18,v,1,0,"th",12),t.YNc(19,S,3,0,"td",13),t.BQk(),t.ynx(20,14),t.YNc(21,A,2,0,"th",15),t.YNc(22,Z,2,1,"td",16),t.BQk(),t.ynx(23,17),t.YNc(24,w,2,0,"th",18),t.YNc(25,U,2,1,"td",16),t.BQk(),t.ynx(26,19),t.YNc(27,I,2,0,"th",20),t.YNc(28,B,3,5,"td",21),t.BQk(),t.ynx(29,22),t.YNc(30,N,2,0,"th",23),t.YNc(31,R,2,1,"td",16),t.BQk(),t.ynx(32,24),t.YNc(33,L,2,0,"th",25),t.YNc(34,K,8,0,"td",26),t.BQk(),t.YNc(35,W,1,0,"tr",27),t.YNc(36,Y,1,0,"tr",28),t.YNc(37,H,3,0,"tr",29),t.qZA()(),t.TgZ(38,"div",30),t._UZ(39,"mat-paginator",31),t.qZA()()),2&e&&(t.xp6(12),t.Akn(0===n.filterDictionary.size?"color:#bfbfbf;margin-bottom: 12px;pointer-events:none;":"color:red;margin-bottom: 12px;"),t.xp6(4),t.Q6J("dataSource",n.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",n.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(3),t.Q6J("pageSizeOptions",t.DdM(6,j)))},dependencies:[d.ez,d.OU,g.p9,g.oG,i.p0,i.BZ,i.fO,i.as,i.w1,i.Dz,i.nj,i.ge,i.ev,i.XQ,i.Gk,i.Ee,m.lN,m.KE,m.hX,m.R9,h.ot,h.lW,s.Ps,s.Hw,C.Cq,D.rP,b.Is,T.c,T.Nt,O.ZX,x.TU,x.NW,f.JX,f.YE,f.nU],styles:[".example-section[_ngcontent-%COMP%]{margin:12px 0}.example-margin[_ngcontent-%COMP%]{margin:0 12px}ul[_ngcontent-%COMP%]{list-style-type:none;margin-top:4px}table[_ngcontent-%COMP%]{width:100%}body[_ngcontent-%COMP%]{overflow-y:hidden}.table-container[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:auto;height:516px}th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.mat-icon-button[_ngcontent-%COMP%]{height:48px}.mat-header-cell[_ngcontent-%COMP%], .cdk-header-cell[_ngcontent-%COMP%], .cdk-column-date[_ngcontent-%COMP%], .mat-column-date[_ngcontent-%COMP%], .ng-star-inserted[_ngcontent-%COMP%], .mat-table-sticky[_ngcontent-%COMP%]{padding:0 1rem;text-align:left}[_ngcontent-%COMP%]::-webkit-scrollbar{height:9px;width:9px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{border-radius:6px;background:#f1f1f1}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:6px;background:#888;height:20%}[_ngcontent-%COMP%]::-webkit-scrollbar-button{height:100%}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{-webkit-transition:.8s;transition:.8s;background:#555}.no-padding[_ngcontent-%COMP%]{padding:0!important}.checkbox[_ngcontent-%COMP%]{margin:0}  .mat-checkbox-checked.mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:#335579!important}  .mat-checkbox-checked.mat-accent .mat-checkbox-background,   .mat-checkbox-checked.mat-accent .mat-checkbox-indeterminate.mat-accent .mat-checkbox-background{background-color:#335579}  .mat-checkbox.mat-accent .mat-checkbox-ripple .mat-ripple-element{background-color:#335579!important}  .custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}td[_ngcontent-%COMP%]{border-bottom:none!important}tr[_ngcontent-%COMP%]{cursor:pointer}[_ngcontent-%COMP%]:ng-deep   .mat-cell.cdk-cell.cdk-column-checkbox.mat-column-checkbox.ng-star-inserted.mat-table-sticky[_ngcontent-%COMP%]{text-align:center!important}.hoveredElements[_ngcontent-%COMP%]:hover{background-color:#f1f1f1f1}.centeredText[_ngcontent-%COMP%]{text-align:center}"]}),o})()}}]);