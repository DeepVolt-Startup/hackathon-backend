"use strict";(self.webpackChunkDLIA_client=self.webpackChunkDLIA_client||[]).push([[302],{2302:(Tt,w,r)=>{r.r(w),r.d(w,{AdminsComponent:()=>At});var d=r(5938),v=r(8739),A=r(6308),c=r(7155),C=r(7009),h=r(4144),q=r(455),x=r(1572),u=r(9549),f=r(4859),g=r(7392),p=r(6895),l=r(4006),y=r(782),k=r(8563),b=r(4385),D=r(8754),t=r(4650),N=r(8167),I=r(2510),F=r(3238);function Y(n,a){1&n&&t._UZ(0,"input",21)}function M(n,a){1&n&&t._UZ(0,"input",21)}function O(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Full name is required"),t.qZA())}function J(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Full name can at least have two words"),t.qZA())}function Q(n,a){1&n&&t._UZ(0,"input",22)}function R(n,a){1&n&&t._UZ(0,"input",22)}function E(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"We only accept work email addresses"),t.qZA())}function S(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter a valid work email address."),t.qZA())}function z(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Work email is required"),t.qZA())}function L(n,a){if(1&n&&t._UZ(0,"input",25),2&n){const e=t.oxw(2);t.Q6J("type",e.hidePassword?"password":"text")}}function B(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"mat-form-field",11)(1,"mat-label"),t._uU(2,"Password"),t.qZA(),t.YNc(3,L,1,1,"input",23),t.TgZ(4,"mat-icon",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.hidePassword=!i.hidePassword)}),t._uU(5),t.qZA(),t.TgZ(6,"mat-error"),t._uU(7),t.qZA()()}if(2&n){const e=t.oxw();t.xp6(3),t.Q6J("ngIf",!e.data),t.xp6(2),t.Oqu(e.hidePassword?"visibility_off":"visibility"),t.xp6(2),t.Oqu(e.getPasswordErrorMessage("password"))}}function j(n,a){if(1&n&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e," ")}}function H(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Role is required"),t.qZA())}function W(n,a){1&n&&t._UZ(0,"mat-spinner",30)}const P=function(n,a){return{"background-color":n,color:a}};function V(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.createAdmin())}),t.TgZ(1,"div",28),t.YNc(2,W,1,0,"mat-spinner",29),t._uU(3," Save "),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.WLB(4,P,e.AdminForm.valid&&!e.isLoading?"#335579":"#E0E0E0",e.AdminForm.valid&&!e.isLoading?"white":"D1D1D1")),t.Q6J("disabled",!e.AdminForm.valid||e.isLoading),t.xp6(2),t.Q6J("ngIf",e.isLoading)}}function $(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.updateAdmin(i.data.admin_id))}),t.TgZ(1,"div",28)(2,"mat-icon"),t._UZ(3,"mat-spinner",30),t.qZA(),t._uU(4," Update "),t.qZA()()}if(2&n){const e=t.oxw();t.Akn(t.WLB(5,P,e.AdminForm.valid&&!e.isLoading&&e.AdminForm.dirty?"#335579":"#E0E0E0",e.AdminForm.valid&&!e.isLoading&&e.AdminForm.dirty?"white":"D1D1D1")),t.Q6J("disabled",!(e.AdminForm.valid&&e.AdminForm.dirty&&!e.isLoading)),t.xp6(2),t.Akn(e.isLoading?"":"display:none;")}}const G=["gmail.com","outlook.com","yahoo.com","icloud.com","aol.com","gmx.com","mail.com","protonmail.com","zoho.com","tutanota.com","hushmail.com","fastmail.com","yandex.com","mail.ru","zimbra.com","prodigy.net.mx","rackspace.com"];let Z=!0;function X(n){const a=n.value.split("@")[1];return G.includes(a)?{notWorkEmail:!0}:null}let U=(()=>{class n{constructor(e,o,i,s,m,_,Ct,xt){this._fb=e,this.dialog=o,this.ref=i,this.adminService=s,this.router=m,this.snackBar=_,this._duialogRef=Ct,this.data=xt,this.hidePassword=!0,this.hideConfirmPassword=!0,this.showAlert=!1,this.alertStyle="alert",this.alertErrorMessage="",this.role=["admin","super-admin"],this.dataSource=new c.by([]),this.isLoading=!1,this.isSpinnerLoading=!1,this.confirmErrorMatcher={isErrorState:(T,yt)=>{const bt=T.touched&&T.invalid,Zt=T.touched&&this.AdminForm.get("password").touched&&this.AdminForm.errors?.passwordMismatchError;return bt||Zt}}}ngOnInit(){console.log("datdda",this.data),this.AdminForm=new l.cw({fullname:new l.NI("",[l.kI.required,l.kI.pattern("^.+(?: +.+ *)+$")]),email:new l.NI("",[l.kI.required,l.kI.email,X]),role:new l.NI("",l.kI.required),password:new l.NI("",this.data?[]:[l.kI.required,l.kI.minLength(8)])}),this.AdminForm.patchValue(this.data),console.log(this.data)}telInputObject(e){e.setCountry("fr")}hasError(e){Z=e}createAdmin(){console.log(this.AdminForm.getRawValue());const e={fullname:this.AdminForm.getRawValue().fullname.trim().replace(/^\w/,o=>o.toUpperCase()),email:this.AdminForm.getRawValue().email.trim().toLowerCase(),password:this.AdminForm.getRawValue().password,role:this.AdminForm.getRawValue().role};this.isLoading=!0,this.adminService.createAdmin(e).subscribe({next:o=>{console.log(o),console.debug(`register successfully ${o}`),this.snackBar.open("Admin added successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),this.isLoading=!1,this._duialogRef.close(),this.adminService.filter("Register click"),this.ref.close(o)},error:o=>{console.log(o),this.snackBar.open(o.error.msg?o.error.msg:"Server is down","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]}),this.isLoading=!1}})}getErrorMessage(e){return this.AdminForm.controls[e]?.hasError("required")?"Confirm Password is required":"Passwords do not match. Please try again"}getPasswordErrorMessage(e){return this.AdminForm.controls[e]?.hasError("required")?"Password is required":"Password length must be 8 characters or more"}getPhoneNumberErrorMessage(e){return this.AdminForm.controls[e]?.hasError("required")?"Phone number is required":"Please enter a valid phone number."}closeAlert(){this.alertStyle="alert hide"}openDeleteDialog(e,o){console.log(e);const i=this.dialog.open(D.$,{data:{title:"Delete admin",content:`Do you want to delete this admin ${o}`},height:"200px",minWidth:"150px",width:"400px",minHeight:"180px"});console.log("zzzzzzzzzzzz",this.dataSource),i.afterClosed().subscribe(s=>{s&&this.adminService.deleteAdmin(e).subscribe({next:()=>{this.deleteRowDataTable(e,"id",this.dataSource),this.snackBar.open("Admin deleted successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]})},error:m=>{console.error(m),this.snackBar.open(m.error.msg?m.error.msg:"Server is down","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}})})}deleteRowDataTable(e,o,i){const s=i.data.findIndex(m=>m[o]===e);i.data.splice(s,1)}updateAdmin(e){console.log(this.AdminForm.getRawValue());const o={fullname:this.AdminForm.getRawValue().fullname.trim().replace(/^\w/,i=>i.toUpperCase()),email:this.AdminForm.getRawValue().email.trim().toLowerCase(),role:this.AdminForm.getRawValue().role};this.isLoading=!0,console.log("ffffffffff",e,o),this.adminService.updateAdmin(e,o).subscribe({next:i=>{console.log(i),console.debug(`register successfully ${i}`),this.snackBar.open("Admin updated successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),this.isLoading=!1,this.adminService.filter("Register click"),this.ref.close(i)},error:i=>{console.log(i),this.snackBar.open(i.error.msg?i.error.msg:"Server is down","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]}),this.isLoading=!1}})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.qu),t.Y36(d.uw),t.Y36(d.so),t.Y36(N.l),t.Y36(I.F0),t.Y36(C.ux),t.Y36(d.so),t.Y36(d.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-add-admin"]],standalone:!0,features:[t.jDz],decls:46,vars:19,consts:[[1,"flex","justify-between"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"mat-dialog-close"],[1,"close-icon"],[1,"text-white","px-6","py-4","border-0","rounded","mb-4","bg-red-500","bg-opacity-90",3,"ngClass"],[1,"text-xl","inline-block","mr-5","align-middle"],[1,"inline-block","align-middle","mr-8"],[1,"inline-block","align-middle"],[1,"cursor-pointer",3,"click"],[3,"formGroup"],[1,"grid","grid-cols-2","gap-x-5"],["appearance","outline"],["matInput","","formControlName","fullname","placeholder","Full name","type","text",4,"ngIf"],[4,"ngIf"],["matInput","","formControlName","email","placeholder","Work email","type","email",4,"ngIf"],["appearance","outline",4,"ngIf"],["formControlName","role","required",""],[3,"value",4,"ngFor","ngForOf"],[1,"relative","w-full","flex","justify-end"],["mat-button","","mat-dialog-close",""],["type","submit","mat-raised-button","",3,"style","disabled","click",4,"ngIf"],["matInput","","formControlName","fullname","placeholder","Full name","type","text"],["matInput","","formControlName","email","placeholder","Work email","type","email"],["matInput","","formControlName","password","placeholder","Password",3,"type",4,"ngIf"],["matSuffix","",3,"click"],["matInput","","formControlName","password","placeholder","Password",3,"type"],[3,"value"],["type","submit","mat-raised-button","",3,"disabled","click"],[1,"flex","items-center"],["diameter","15","class","px-3 mt-1",4,"ngIf"],["diameter","15",1,"px-3","mt-1"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"div",4)(7,"span",5)(8,"mat-icon"),t._uU(9,"report"),t.qZA()(),t.TgZ(10,"span",6),t._uU(11),t.qZA(),t.TgZ(12,"span",7)(13,"mat-icon",8),t.NdJ("click",function(){return o.closeAlert()}),t._uU(14,"close"),t.qZA()()(),t.TgZ(15,"form",9)(16,"div",10)(17,"mat-form-field",11)(18,"mat-label"),t._uU(19,"Full name"),t.qZA(),t.YNc(20,Y,1,0,"input",12),t.YNc(21,M,1,0,"input",12),t.YNc(22,O,2,0,"mat-error",13),t.YNc(23,J,2,0,"mat-error",13),t.qZA(),t.TgZ(24,"mat-form-field",11)(25,"mat-label"),t._uU(26,"Work email"),t.qZA(),t.YNc(27,Q,1,0,"input",14),t.YNc(28,R,1,0,"input",14),t.YNc(29,E,2,0,"mat-error",13),t.YNc(30,S,2,0,"mat-error",13),t.YNc(31,z,2,0,"mat-error",13),t.qZA(),t.YNc(32,B,8,3,"mat-form-field",15),t.TgZ(33,"mat-form-field",11)(34,"mat-label"),t._uU(35,"Role"),t.qZA(),t.TgZ(36,"div")(37,"mat-select",16),t.YNc(38,j,2,2,"mat-option",17),t.qZA()(),t.YNc(39,H,2,0,"mat-error",13),t.qZA()(),t.TgZ(40,"div",18)(41,"div")(42,"button",19),t._uU(43,"Cancel"),t.qZA(),t.YNc(44,V,4,7,"button",20),t.YNc(45,$,5,8,"button",20),t.qZA()()()),2&e&&(t.xp6(2),t.Oqu(o.data?"Update admin details":"Create Admin"),t.xp6(1),t.Q6J("mat-dialog-close",!0),t.xp6(3),t.Q6J("ngClass",o.alertStyle),t.xp6(5),t.hij(" ",o.alertErrorMessage," "),t.xp6(4),t.Q6J("formGroup",o.AdminForm),t.xp6(5),t.Q6J("ngIf",!o.data),t.xp6(1),t.Q6J("ngIf",o.data),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("fullname").errors?null:o.AdminForm.get("fullname").errors.required),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("fullname").errors?null:o.AdminForm.get("fullname").errors.pattern),t.xp6(4),t.Q6J("ngIf",!o.data),t.xp6(1),t.Q6J("ngIf",o.data),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("email").errors?null:o.AdminForm.get("email").errors.notWorkEmail),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("email").errors?null:o.AdminForm.get("email").errors.email),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("email").errors?null:o.AdminForm.get("email").errors.required),t.xp6(1),t.Q6J("ngIf",!o.data),t.xp6(6),t.Q6J("ngForOf",o.role),t.xp6(1),t.Q6J("ngIf",null==o.AdminForm.get("role").errors?null:o.AdminForm.get("role").errors.required),t.xp6(5),t.Q6J("ngIf",!o.data),t.xp6(1),t.Q6J("ngIf",o.data))},dependencies:[g.Ps,g.Hw,y.N6,h.c,u.TO,u.KE,u.hX,u.R9,h.Nt,f.ot,f.lW,u.lN,k.g,l.u5,l._Y,l.Fj,l.JJ,l.JL,l.Q7,d.Is,d.ZT,d.uh,l.UX,l.sg,l.u,p.ez,p.mk,p.sg,p.O5,b.LD,b.gD,F.ey,x.Cq,x.$g],styles:[".alert[_ngcontent-%COMP%]{position:fixed;top:-100px;left:50%;transform:translate(-50%)}.alert.show[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideIn;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideIn{0%{top:-100px}to{top:0}}.alert.hide[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideOut;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideOut{0%{top:0}to{top:-100px}}  .custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}"]}),n})();var K=r(3546);function tt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.openDeleteConfirmation())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}let et=(()=>{class n{constructor(e,o){this.dialogRef=e,this.data=o,this.alertStyle="alert",this.alertErrorMessage=""}ngOnInit(){this.fullname=this.data.fullname||"",this.admin_id=this.data.admin_id||""}openDeleteConfirmation(){this.dialogRef.close(),this.openDeleteDialog(this.admin_id,this.fullname)}closeDialog(){}close(){this.dialogRef.close()}delete(){this.dialogRef.close("delete")}closeAlert(){this.alertStyle="alert hide"}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(d.so),t.Y36(d.WI))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admin-details"]],inputs:{openDeleteDialog:"openDeleteDialog",openAdminDetails:"openAdminDetails",fullname:"fullname",admin_id:"admin_id"},standalone:!0,features:[t.jDz],decls:28,vars:5,consts:[[1,"flex","justify-between"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"mat-dialog-close"],[1,"close-icon"],["mat-dialog-content","",1,""],[1,"text-base","font-medium","mb-3"],["mat-dialog-actions","",1,"flex","justify-between","items-center"],["mat-icon-button","","style","color: red","matTooltip","Basic",3,"click",4,"ngIf"],["mat-button","",3,"click"],["mat-icon-button","","matTooltip","Basic",2,"color","red",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"h2",1),t._uU(2,"Admin Details"),t.qZA(),t.TgZ(3,"button",2)(4,"mat-icon",3),t._uU(5,"close"),t.qZA()()(),t.TgZ(6,"div",4)(7,"mat-label"),t._uU(8," Fullname:"),t.qZA(),t.TgZ(9,"p",5),t._UZ(10,"strong"),t._uU(11),t.qZA(),t.TgZ(12,"mat-label"),t._uU(13," Email:"),t.qZA(),t.TgZ(14,"p",5),t._UZ(15,"strong"),t._uU(16),t.qZA(),t.TgZ(17,"mat-label"),t._uU(18," Role:"),t.qZA(),t.TgZ(19,"p",5),t._UZ(20,"strong"),t._uU(21),t.qZA()(),t.TgZ(22,"div",6)(23,"div"),t.YNc(24,tt,3,0,"button",7),t.qZA(),t.TgZ(25,"div")(26,"button",8),t.NdJ("click",function(){return o.close()}),t._uU(27,"Close"),t.qZA()()()),2&e&&(t.xp6(3),t.Q6J("mat-dialog-close",!0),t.xp6(8),t.hij(" ",o.data.fullname,""),t.xp6(5),t.hij(" ",o.data.email,""),t.xp6(5),t.hij(" ",o.data.role,""),t.xp6(3),t.Q6J("ngIf","super-admin"!==o.data.role))},dependencies:[g.Ps,g.Hw,y.N6,h.c,u.hX,f.ot,f.lW,u.lN,k.g,l.u5,d.Is,d.ZT,d.uh,d.xY,d.H8,l.UX,p.ez,p.O5,b.LD,K.QW],styles:[".alert[_ngcontent-%COMP%]{position:fixed;top:-100px;left:50%;transform:translate(-50%)}.alert.show[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideIn;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideIn{0%{top:-100px}to{top:0}}.alert.hide[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_slideOut;animation-duration:.5s;animation-timing-function:ease-out;animation-fill-mode:forwards}@keyframes _ngcontent-%COMP%_slideOut{0%{top:0}to{top:-100px}}"]}),n})();function nt(n,a){1&n&&(t.TgZ(0,"th",25),t._uU(1," Name "),t.qZA())}function ot(n,a){if(1&n&&(t.TgZ(0,"td",26),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.fullname)}}function it(n,a){1&n&&(t.TgZ(0,"th",25),t._uU(1," Email "),t.qZA())}function at(n,a){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.email)}}function lt(n,a){1&n&&(t.TgZ(0,"th",25),t._uU(1," Role "),t.qZA())}function rt(n,a){if(1&n&&(t.TgZ(0,"td",27),t._uU(1),t.qZA()),2&n){const e=a.$implicit;t.xp6(1),t.Oqu(e.role)}}function st(n,a){1&n&&(t.TgZ(0,"th",28),t._uU(1," Action "),t.qZA())}function mt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openEditForm(i))}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function dt(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,s=t.oxw();return t.KtG(s.openDeleteDialog(i.admin_id,i.fullname))}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}function ct(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"td",29),t.YNc(1,mt,3,0,"button",30),t.TgZ(2,"button",31),t.NdJ("click",function(){const s=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.openAdminDetails(s))}),t.TgZ(3,"mat-icon"),t._uU(4,"info"),t.qZA()(),t.YNc(5,dt,3,0,"button",32),t.qZA()}if(2&n){const e=a.$implicit;t.xp6(1),t.Q6J("ngIf","super-admin"!==e.role),t.xp6(4),t.Q6J("ngIf","super-admin"!==e.role)}}function ut(n,a){1&n&&t._UZ(0,"tr",34)}function pt(n,a){1&n&&t._UZ(0,"tr",35)}function ft(n,a){if(1&n&&(t.TgZ(0,"td",38),t._uU(1),t.qZA()),2&n){t.oxw(2);const e=t.MAs(9);t.xp6(1),t.hij(' No data matching the filter "',e.value,'" ')}}function gt(n,a){if(1&n&&(t.TgZ(0,"tr",36),t.YNc(1,ft,2,1,"td",37),t.qZA()),2&n){t.oxw();const e=t.MAs(9);t.xp6(1),t.Q6J("ngIf",""!==e.value)}}function ht(n,a){1&n&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2,"No data available"),t.qZA(),t.BQk())}function _t(n,a){1&n&&(t.ynx(0),t.TgZ(1,"p"),t._uU(2,"No data available"),t.qZA(),t.BQk())}let At=(()=>{class n{constructor(e,o,i,s,m){this.adminService=e,this.dialog=o,this.cdr=i,this.router=s,this.snackBar=m,this.displayedColumns=["full Name","email","role","action"],this.dataSource=new c.by([]),this.pageIndex=0,this.noDataAvailable=!1,this.showTable=!1,this.adminService.listen().subscribe(_=>{console.log(_),this.getAdmins()}),0===this.dataSource.data.length&&(this.noDataAvailable=!0)}ngOnInit(){this.getAdmins()}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.pageIndex=0,this.dataSource.paginator&&this.dataSource.paginator.firstPage()}openAddAdminDialog(){this.dialog.open(U).afterClosed().subscribe({next:o=>{o&&(this.dataSource.data.unshift(o.data),this.cdr.detectChanges())}})}openEditForm(e){this.dialog.open(U,{data:e}).afterClosed().subscribe({next:i=>{i&&(this.dataSource.data.unshift(i.data),this.cdr.detectChanges())}})}getAdmins(){this.adminService.getAdmins().subscribe({next:e=>{e.data.sort((o,i)=>new Date(i.updated_at).getTime()-new Date(o.updated_at).getTime()),this.dataSource=new c.by(e.data),this.admins=e.data,this.dataSource.paginator=this.paginator,console.log("data",e),this.noDataAvailable=0===this.dataSource.data.length}})}deleteRowDataTable(e,o,i,s){const m=s.data.findIndex(_=>_[o]===e);s.data.splice(m,1),s.paginator=i}openAdminDetails(e){this.dialog.open(et,{data:e,height:"310px",minWidth:"150px",width:"400px",minHeight:"180px"}).componentInstance.openDeleteDialog=this.openDeleteDialog.bind(this)}openDeleteDialog(e,o){const i=this.dialog.open(D.$,{data:{title:"Delete admin",content:`Do you want to delete this admin ${o}`},height:"200px",minWidth:"150px",width:"400px",minHeight:"180px"});i.afterClosed().subscribe(s=>{s?this.adminService.deleteAdmin(e).subscribe({next:()=>{this.snackBar.open("User deleted successfully","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),this.dialog.closeAll(),this.adminService.filter("Register click")},error:m=>{console.error(m),this.snackBar.open(m.error.msg?m.error.msg:"Server is down","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}}):i.close()})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(N.l),t.Y36(d.uw),t.Y36(t.sBO),t.Y36(I.F0),t.Y36(C.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-admins"]],viewQuery:function(e,o){if(1&e&&(t.Gf(v.NW,5),t.Gf(A.YE,5)),2&e){let i;t.iGM(i=t.CRH())&&(o.paginator=i.first),t.iGM(i=t.CRH())&&(o.sort=i.first)}},standalone:!0,features:[t.jDz],decls:34,vars:5,consts:[[1,"w-full","flex","flex-col","justify-center","items-center","mt-20",2,"background-color","white"],[1,"w-11/12","flex","justify-between","items-center","h-3"],[1,"text-2xl","font-medium","mb-6"],[1,"flex","items-center","justify-center"],["appearance","outline",1,"w-44","justify-self-end",2,"font-size","10px"],["matInput","",3,"keyup"],["input",""],["matSuffix",""],["mat-raised-button","",2,"background-color","#335579","color","white","margin-left","20px","margin-bottom","15px",3,"click"],[1,"table-container","w-11/12","justify-between","sticky","mt-4"],["mat-table","","matSort","",1,"",2,"width","100%",3,"dataSource"],["showTable",""],["matColumnDef","full Name"],["mat-header-cell","","class","text-lg font-medium mb-6",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","email"],["mat-cell","","class","text-base font-normal mb-6",4,"matCellDef"],["matColumnDef","role"],["matColumnDef","action"],["mat-header-cell","","class","text-base font-medium mb-6 ","style","text-align: right;padding-right: 38px",4,"matHeaderCellDef"],["mat-cell","","class","text-base font-normal mb-6","class","flex justify-end",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[4,"ngIf"],["mat-header-cell","",1,"text-lg","font-medium","mb-6"],["mat-cell",""],["mat-cell","",1,"text-base","font-normal","mb-6"],["mat-header-cell","",1,"text-base","font-medium","mb-6",2,"text-align","right","padding-right","38px"],["mat-cell","",1,"flex","justify-end"],["mat-icon-button","","style","color: #335579","matTooltip","Basic",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Basic",2,"color","#335579",3,"click"],["mat-icon-button","","style","color: red","matTooltip","Basic",3,"click",4,"ngIf"],["mat-icon-button","","matTooltip","Basic",2,"color","red",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["class","mat-cell","colspan","4",4,"ngIf"],["colspan","4",1,"mat-cell"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3,"Admins"),t.qZA(),t.TgZ(4,"div",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"input",5,6),t.NdJ("keyup",function(s){return o.applyFilter(s)}),t.qZA(),t.TgZ(10,"mat-icon",7),t._uU(11,"search"),t.qZA()(),t.TgZ(12,"button",8),t.NdJ("click",function(){return o.openAddAdminDialog()}),t._uU(13," Add Admin "),t.qZA()()(),t.TgZ(14,"div",9)(15,"table",10,11),t.ynx(17,12),t.YNc(18,nt,2,0,"th",13),t.YNc(19,ot,2,1,"td",14),t.BQk(),t.ynx(20,15),t.YNc(21,it,2,0,"th",13),t.YNc(22,at,2,1,"td",16),t.BQk(),t.ynx(23,17),t.YNc(24,lt,2,0,"th",13),t.YNc(25,rt,2,1,"td",16),t.BQk(),t.ynx(26,18),t.YNc(27,st,2,0,"th",19),t.YNc(28,ct,6,2,"td",20),t.BQk(),t.YNc(29,ut,1,0,"tr",21),t.YNc(30,pt,1,0,"tr",22),t.YNc(31,gt,2,1,"tr",23),t.YNc(32,ht,3,0,"ng-container",24),t.YNc(33,_t,3,0,"ng-container",24),t.qZA()()()),2&e&&(t.xp6(15),t.Q6J("dataSource",o.dataSource),t.xp6(14),t.Q6J("matHeaderRowDef",o.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns),t.xp6(2),t.Q6J("ngIf",o.noDataAvailable),t.xp6(1),t.Q6J("ngIf",o.noDataAvailable))},dependencies:[p.ez,p.O5,l.u5,c.p0,c.BZ,c.fO,c.as,c.w1,c.Dz,c.nj,c.ge,c.ev,c.XQ,c.Gk,c.Ee,u.lN,u.KE,u.hX,u.R9,f.ot,f.lW,g.Ps,g.Hw,x.Cq,q.rP,d.Is,h.c,h.Nt,C.ZX,v.TU,A.JX,A.YE],styles:["th.mat-header-cell[_ngcontent-%COMP%]:first-of-type, td.mat-cell[_ngcontent-%COMP%]:first-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:first-of-type{padding-left:0}th.mat-header-cell[_ngcontent-%COMP%]:last-of-type, td.mat-cell[_ngcontent-%COMP%]:last-of-type, td.mat-footer-cell[_ngcontent-%COMP%]:last-of-type{padding-right:0}.mat-icon-button[_ngcontent-%COMP%], .mat-icon-button[_ngcontent-lsi-c187][_ngcontent-%COMP%]{height:48px}.table-container[_ngcontent-%COMP%]{overflow:auto;max-height:500px}[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0;background-color:transparent}th[_ngcontent-%COMP%]{position:sticky;top:0;background-color:#fff;z-index:1}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{text-align:left;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}  .custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}"]}),n})()}}]);