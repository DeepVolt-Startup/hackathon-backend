"use strict";(self.webpackChunkDLIA_client=self.webpackChunkDLIA_client||[]).push([[638],{638:(I,g,s)=>{s.r(g),s.d(g,{AdminProfileComponent:()=>Y});var l=s(6895),u=s(7392),w=s(782),p=s(4144),c=s(4859),i=s(9549),f=s(8563),o=s(4006),m=s(2510),h=s(5938),P=s(7009),_=s(1572),e=s(4650),v=s(8167);function Z(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Minimum length is 8"),e.qZA())}function N(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Old password is required"),e.qZA())}function b(n,a){1&n&&(e.TgZ(0,"mat-icon"),e._UZ(1,"mat-spinner",15),e.qZA())}function y(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function C(n,a){return r=>{const t=r.get(n),d=r.get(a);return t.value!==d.value?{passwordMismatchError:!0}:null}}let A=(()=>{class n{constructor(r,t,d){this.dialog=r,this._adminService=t,this.snackBar=d,this.hidePassword=!0,this.hideNewPassword=!0,this.confirmNewPassword=!0,this.hideConfirmPassword=!0,this.updatePasswordLoading=!1,this.confirmErrorMatcher={isErrorState:(T,j)=>{const Q=T.touched&&T.invalid,W=T.touched&&this.updatePasswordForm.get("confirmNewPassword").touched&&this.updatePasswordForm.errors?.passwordMismatchError;return Q||W}}}ngOnInit(){this.updatePasswordForm=new o.cw({oldPassword:new o.NI("",[o.kI.required,o.kI.minLength(8)]),newPassword:new o.NI("",[o.kI.required,o.kI.minLength(8)]),confirmNewPassword:new o.NI("",[o.kI.required,o.kI.minLength(8)])},{validators:C("newPassword","confirmNewPassword")})}getPasswordErrorMessage(r){return this.updatePasswordForm.controls[r]?.hasError("required")?"Password is required":"Minimum length is 8"}onCloseDialog(){this.dialog.closeAll()}getErrorMessage(r){return this.updatePasswordForm.controls[r]?.hasError("required")?"Confirm Password is required":"Passwords do not match. Please try again"}updatePassword(){this.updatePasswordLoading=!0,this._adminService.updatePsaaword({oldPassword:this.updatePasswordForm.getRawValue().oldPassword,newPassword:this.updatePasswordForm.getRawValue().newPassword}).subscribe({next:r=>{console.log(r),this.snackBar.open(r.msg,"close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),this.updatePasswordLoading=!1,this.onCloseDialog()},error:r=>{this.snackBar.open(r.data.msg,"close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style"]})}})}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(h.uw),e.Y36(v.l),e.Y36(P.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-update-password"]],standalone:!0,features:[e.jDz],decls:37,vars:17,consts:[[1,"md:","w-full"],[3,"formGroup","submit"],["type","email","name","username",1,"hidden"],[1,"flex","justify-between","items-center","mb-4","mx-0"],[1,"title"],[1,"cursor-pointer",3,"click"],[1,"grid","grid-cols-2","gap-x-5",2,"grid-template-columns","repeat(1, 1fr)"],["appearance","outline"],["matInput","","formControlName","oldPassword","placeholder","Old password",3,"type"],["matSuffix","",3,"click"],[4,"ngIf"],["matInput","","formControlName","newPassword","placeholder","New password",3,"type"],["matInput","","formControlName","confirmNewPassword","placeholder","Confirm new password",3,"type","errorStateMatcher"],[1,"container-btn","flex","justify-end"],["type","submit","mat-raised-button","",1,"update-btn","items-right",3,"disabled"],["diameter","20"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("submit",function(){return t.updatePassword()}),e._UZ(2,"input",2),e.TgZ(3,"div",3)(4,"h2",4),e._uU(5,"Update password"),e.qZA(),e.TgZ(6,"mat-icon",5),e.NdJ("click",function(){return t.onCloseDialog()}),e._uU(7," clear "),e.qZA()(),e.TgZ(8,"div",6)(9,"mat-form-field",7)(10,"mat-label"),e._uU(11,"Old password"),e.qZA(),e._UZ(12,"input",8),e.TgZ(13,"mat-icon",9),e.NdJ("click",function(){return t.hidePassword=!t.hidePassword}),e._uU(14),e.qZA(),e.YNc(15,Z,2,0,"mat-error",10),e.YNc(16,N,2,0,"mat-error",10),e.qZA(),e.TgZ(17,"mat-form-field",7)(18,"mat-label"),e._uU(19,"New password"),e.qZA(),e._UZ(20,"input",11),e.TgZ(21,"mat-icon",9),e.NdJ("click",function(){return t.hideNewPassword=!t.hideNewPassword}),e._uU(22),e.qZA(),e.TgZ(23,"mat-error"),e._uU(24),e.qZA()(),e.TgZ(25,"mat-form-field",7)(26,"mat-label"),e._uU(27,"Confirm new password"),e.qZA(),e._UZ(28,"input",12),e.TgZ(29,"mat-icon",9),e.NdJ("click",function(){return t.confirmNewPassword=!t.confirmNewPassword}),e._uU(30),e.qZA(),e.TgZ(31,"mat-error"),e._uU(32),e.qZA()(),e.TgZ(33,"div",13)(34,"button",14),e.YNc(35,b,2,0,"mat-icon",10),e.YNc(36,y,2,0,"span",10),e.qZA()()()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",t.updatePasswordForm),e.xp6(11),e.Q6J("type",t.hidePassword?"password":"text"),e.xp6(2),e.Oqu(t.hidePassword?"visibility_off":"visibility"),e.xp6(1),e.Q6J("ngIf",t.updatePasswordForm.get("oldPassword").hasError("minlength")),e.xp6(1),e.Q6J("ngIf",null==t.updatePasswordForm.get("oldPassword").errors?null:t.updatePasswordForm.get("oldPassword").errors.required),e.xp6(4),e.Q6J("type",t.hideNewPassword?"password":"text"),e.xp6(2),e.Oqu(t.hideNewPassword?"visibility_off":"visibility"),e.xp6(2),e.Oqu(t.getPasswordErrorMessage("newPassword")),e.xp6(4),e.Q6J("type",t.confirmNewPassword?"password":"text")("errorStateMatcher",t.confirmErrorMatcher),e.xp6(2),e.Oqu(t.confirmNewPassword?"visibility_off":"visibility"),e.xp6(2),e.Oqu(t.getErrorMessage("confirmNewPassword")),e.xp6(2),e.Akn("background-color:"+(t.updatePasswordForm.valid&&!t.updatePasswordLoading?"#335579;color:white;":"#E0E0E0;color:D1D1D1;")),e.Q6J("disabled",!t.updatePasswordForm.valid||t.updatePasswordLoading),e.xp6(1),e.Q6J("ngIf",t.updatePasswordLoading),e.xp6(1),e.Q6J("ngIf",!t.updatePasswordLoading))},dependencies:[l.ez,l.O5,u.Ps,u.Hw,w.N6,p.c,i.TO,i.KE,i.hX,i.R9,p.Nt,c.ot,c.lW,i.lN,f.g,o.u5,o._Y,o.Fj,o.JJ,o.JL,o.UX,o.sg,o.u,m.Bz,P.ZX,_.Cq,_.$g],styles:[".custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}"]}),n})();function U(n,a){1&n&&(e.TgZ(0,"mat-icon"),e._UZ(1,"mat-spinner",7),e.qZA())}function F(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"Save"),e.qZA())}function E(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"mat-spinner",8),e.qZA())}function k(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Full name is required"),e.qZA())}function O(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Full name can at least have two words"),e.qZA())}function q(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"We only accept work email addresses"),e.qZA())}function x(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter a valid work email address."),e.qZA())}function J(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1,"Work email is required"),e.qZA())}function M(n,a){if(1&n){const r=e.EpF();e.TgZ(0,"form",9),e.NdJ("submit",function(){e.CHM(r);const d=e.oxw();return e.KtG(d.updateAdmin())}),e.TgZ(1,"div",10)(2,"mat-form-field",11)(3,"mat-label"),e._uU(4,"Full name"),e.qZA(),e._UZ(5,"input",12),e.YNc(6,k,2,0,"mat-error",5),e.YNc(7,O,2,0,"mat-error",5),e.qZA(),e.TgZ(8,"mat-form-field",11)(9,"mat-label"),e._uU(10,"Email"),e.qZA(),e._UZ(11,"input",13),e.YNc(12,q,2,0,"mat-error",5),e.YNc(13,x,2,0,"mat-error",5),e.YNc(14,J,2,0,"mat-error",5),e.qZA(),e.TgZ(15,"mat-form-field",14)(16,"mat-label"),e._uU(17,"Role"),e.qZA(),e._UZ(18,"input",15),e.qZA()(),e.TgZ(19,"div",16)(20,"button",17),e.NdJ("click",function(){e.CHM(r);const d=e.oxw();return e.KtG(d.openDialog())}),e._uU(21," Update password "),e.qZA()(),e._UZ(22,"div",18),e.qZA()}if(2&n){const r=e.oxw();e.Q6J("formGroup",r.profileForm),e.xp6(6),e.Q6J("ngIf",null==r.profileForm.get("FullName").errors?null:r.profileForm.get("FullName").errors.required),e.xp6(1),e.Q6J("ngIf",null==r.profileForm.get("FullName").errors?null:r.profileForm.get("FullName").errors.pattern),e.xp6(5),e.Q6J("ngIf",null==r.profileForm.get("WorkEmail").errors?null:r.profileForm.get("WorkEmail").errors.notWorkEmail),e.xp6(1),e.Q6J("ngIf",null==r.profileForm.get("WorkEmail").errors?null:r.profileForm.get("WorkEmail").errors.email),e.xp6(1),e.Q6J("ngIf",null==r.profileForm.get("WorkEmail").errors?null:r.profileForm.get("WorkEmail").errors.required)}}const D=["gmail","outlook","yahoo","icloud","aol","gmx","mail","protonmail","zoho","tutanota","hushmail","fastmail","yandex","mail","zimbra","prodigy","rackspace"];function L(n){const a=n.value.split("@")[1]?.split(".")[0];return D.includes(a)?{notWorkEmail:!0}:null}let Y=(()=>{class n{ngOnInit(){this.profileForm=new o.cw({FullName:new o.NI("",[o.kI.required,o.kI.pattern("^.+(?: +.+ *)+$")]),WorkEmail:new o.NI("",[o.kI.required,o.kI.email,L]),Role:new o.NI({value:"",disabled:!0})}),this._adminService.get().subscribe({next:r=>{console.log("this is the admin details : ",r),this.profileDetailsLoading=!1,this.profileForm.setValue({FullName:r.fullname,WorkEmail:r.email,Role:r.role})}})}constructor(r,t,d){this.dialog=r,this._adminService=t,this.snackBar=d,this.profileDetailsLoading=!0,this.savingProfileLoading=!1}openDialog(){this.dialog.open(A).afterClosed().subscribe({next:t=>{}})}updateAdmin(){this.savingProfileLoading=!0;const r={fullname:this.profileForm.getRawValue().FullName.trim(),email:this.profileForm.getRawValue().WorkEmail.trim()};this._adminService.update(r).subscribe({next:t=>{console.log(t),this.snackBar.open("admin infos updated successfully","close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]}),this.savingProfileLoading=!1,this.profileForm.markAsPristine()},error:t=>{console.log(t),this.snackBar.open("An error has occurred. Please try again later.","close",{duration:3e3,horizontalPosition:"center",verticalPosition:"top",panelClass:["custom-style-green"]})}})}}return n.\u0275fac=function(r){return new(r||n)(e.Y36(h.uw),e.Y36(v.l),e.Y36(P.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin-profile"]],standalone:!0,features:[e.jDz],decls:11,vars:7,consts:[[1,"container","my-2","px-14","mt-10","max-w-full","md:max-w-4xl"],[1,"header-title","flex","justify-between","items-center","my-6","mx-0"],[1,"profile-details-container","flex","items-center"],[1,"profile-details-title"],["form","myForm","type","submit","mat-raised-button","",3,"disabled"],[4,"ngIf"],["id","myForm",3,"formGroup","submit",4,"ngIf"],["diameter","20"],[1,"w-16","h-16","text-blue-500"],["id","myForm",3,"formGroup","submit"],[1,"grid","md:grid-cols-2","gap-x-5","user-details"],["appearance","outline"],["matInput","","formControlName","FullName","placeholder","Full name","type","text"],["matInput","","formControlName","WorkEmail","placeholder","Work email","type","email"],["appearance","outline","floatLabel","always"],["matInput","","formControlName","Role","placeholder","Role","type","text"],[1,"relative","w-full","flex","justify-center","py-6","flex-col-reverse","md:flex-row","items-center"],["type","button","mat-raised-button","",2,"color","#fff","background-color","#335579","position","absolute","left","0",3,"click"],[1,"btn-container"]],template:function(r,t){1&r&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),e._uU(4,"Profile details"),e.qZA()(),e.TgZ(5,"div",2)(6,"button",4),e.YNc(7,U,2,0,"mat-icon",5),e.YNc(8,F,2,0,"span",5),e.qZA()()(),e.YNc(9,E,2,0,"div",5),e.YNc(10,M,23,6,"form",6),e.qZA()),2&r&&(e.xp6(6),e.Akn(t.profileForm.valid&&t.profileForm.dirty&&!t.savingProfileLoading?"background-color:#335579;color:white;":"background-color:#E0E0E0;color:D1D1D1;"),e.Q6J("disabled",!t.profileForm.dirty||!t.profileForm.valid||t.savingProfileLoading),e.xp6(1),e.Q6J("ngIf",t.savingProfileLoading),e.xp6(1),e.Q6J("ngIf",!t.savingProfileLoading),e.xp6(1),e.Q6J("ngIf",t.profileDetailsLoading),e.xp6(1),e.Q6J("ngIf",!t.profileDetailsLoading))},dependencies:[l.ez,l.O5,u.Ps,u.Hw,w.N6,p.c,i.TO,i.KE,i.hX,p.Nt,c.ot,c.lW,i.lN,f.g,o.u5,o._Y,o.Fj,o.JJ,o.JL,o.UX,o.sg,o.u,m.Bz,h.Is,P.ZX,_.Cq,_.$g],styles:['.profile-details-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:0}.header-title[_ngcontent-%COMP%]{position:relative}.header-title[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:1px;background-color:#e5e7eb;bottom:-8px}  .custom-style{background-color:#fe5157;color:#fff}  .custom-style-green{background-color:#10b981;color:#fff}  .mat-simple-snackbar-action>button{color:#fff}']}),n})()},8563:(I,g,s)=>{s.d(g,{_:()=>p,g:()=>c});var l=s(4650),u=s(6895);let p=(()=>{class i{constructor(o,m){this.el=o,this.platformId=m,this.ng2TelInputOptions={},this.hasError=new l.vpe,this.ng2TelOutput=new l.vpe,this.countryChange=new l.vpe,this.intlTelInputObject=new l.vpe}ngOnInit(){(0,u.NF)(this.platformId)&&(this.ng2TelInputOptions=Object.assign({},this.ng2TelInputOptions,{utilsScript:this.getUtilsScript(this.ng2TelInputOptions)}),this.ngTelInput=window.intlTelInput(this.el.nativeElement,Object.assign({},this.ng2TelInputOptions)),this.el.nativeElement.addEventListener("countrychange",()=>{this.countryChange.emit(this.ngTelInput.getSelectedCountryData())}),this.intlTelInputObject.emit(this.ngTelInput))}onBlur(){let o=this.isInputValid();if(o){let m=this.ngTelInput.getNumber();this.hasError.emit(o),this.ng2TelOutput.emit(m)}else this.hasError.emit(o)}isInputValid(){return this.ngTelInput.isValidNumber()}setCountry(o){this.ngTelInput.setCountry(o)}getUtilsScript(o){return o.utilsScript||"https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/16.0.1/js/utils.js"}}return i.\u0275fac=function(o){return new(o||i)(l.Y36(l.SBq),l.Y36(l.Lbi))},i.\u0275dir=l.lG2({type:i,selectors:[["","ng2TelInput",""]],hostBindings:function(o,m){1&o&&l.NdJ("blur",function(){return m.onBlur()})},inputs:{ng2TelInputOptions:"ng2TelInputOptions"},outputs:{hasError:"hasError",ng2TelOutput:"ng2TelOutput",countryChange:"countryChange",intlTelInputObject:"intlTelInputObject"}}),i})(),c=(()=>{class i{static forRoot(){return{ngModule:i,providers:[]}}}return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=l.oAB({type:i}),i.\u0275inj=l.cJS({}),i})()}}]);